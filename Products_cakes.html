<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PassionBakeryNChocos</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Delius&family=Diphylleia&family=Great+Vibes&family=Tangerine:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <style>
/* CSS Variables */
:root {
  --primary-gradient: linear-gradient(90deg, rgba(30, 242, 253, 0.95) 0%, rgba(74, 144, 226, 0.95) 100%);
  --section-gradient: linear-gradient(135deg, #6266f4 0%, #4a54d1 50%, #3d47b8 100%);
  --button-gradient: linear-gradient(45deg, #11124a, #1a1d5a);
  --hover-gradient: linear-gradient(45deg, #fea3aa, #ff7b82);
  --gold: #ffd700;
  --primary-text: #11124a;
  --white: #ffffff;
  --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --border-radius: 20px;
  --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  --card-shadow-hover: 0 20px 40px rgba(0, 0, 0, 0.15);
  --primary-color: #6366f1;
  --accent-color: #10b981;
  --text-primary: #1f2937;
  --text-secondary: #6b7280;
}

/* Global Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  background: #1ef2fd;
  overflow-x: hidden;
  line-height: 1.6;
  font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  max-width: 100vw;
}

/* Notification Styles */
.notification {
  position: fixed;
  top: 20px;
  right: -400px;
  background: linear-gradient(135deg, #6266f4 0%, #4a54d1 100%);
  color: white;
  padding: 18px 35px;
  border-radius: 12px;
  box-shadow: 0 10px 40px rgba(98, 102, 244, 0.4);
  z-index: 99999;
  display: flex;
  align-items: center;
  gap: 12px;
  font-family: Delius, sans-serif;
  font-weight: 600;
  font-size: 16px;
  transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  border: 2px solid rgba(255, 215, 0, 0.4);
  min-width: fit-content;
  white-space: nowrap;
}

.notification.show {
  right: 20px;
  animation: slideInFromRight 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.notification.hide {
  right: -400px;
  opacity: 0;
}

.notification i {
  font-size: 24px;
  animation: checkPulse 0.6s ease-in-out;
}

.notification.added {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  border-color: rgba(16, 185, 129, 0.4);
  box-shadow: 0 10px 40px rgba(16, 185, 129, 0.4);
}

.notification.removed {
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  border-color: rgba(245, 158, 11, 0.4);
  box-shadow: 0 10px 40px rgba(245, 158, 11, 0.4);
}

@keyframes slideInFromRight {
  0% { right: -400px; opacity: 0; transform: scale(0.8); }
  60% { right: 10px; transform: scale(1.05); }
  80% { right: 25px; }
  100% { right: 20px; opacity: 1; transform: scale(1); }
}

@keyframes checkPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}

/* Navigation Bar */
.topnav {
  overflow: hidden;
  background: var(--primary-gradient);
  font-family: Delius;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 2px solid rgba(255, 215, 0, 0.3);
  position: sticky;
  top: 0;
  z-index: 1000;
}

.topnav a, .topnav .cart-icon {
  float: left;
  display: block;
  color: var(--primary-text);
  text-align: center;
  padding: 16px 24px;
  font-weight: bold;
  text-decoration: none;
  font-size: clamp(0.9rem, 2.5vw, 1.25rem);
  border-radius: 12px;
  margin: 8px 6px;
  transition: var(--transition);
  position: relative;
  overflow: hidden;
}

.topnav a:before {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: var(--transition);
}

.topnav a:hover:before {
  left: 100%;
}

.topnav a:hover, .topnav .cart-icon:hover {
  background: linear-gradient(45deg, #0000ff, #4169e1);
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
}

.topnav .cart-icon:hover {
  transform: translateY(-2px) rotate(5deg);
}

.topnav a.active {
  background: linear-gradient(45deg, #3e476f, #5a6491);
  color: white;
  box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
  transform: scale(1.05);
}

.topnav .icon {
  display: none;
}

/* Border Images */
.border-image {
  width: min(70%, 600px);
  height: auto;
  margin: 20px auto;
  display: block;
  animation: imageFloat 6s ease-in-out infinite;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3)) brightness(1.1) contrast(1.1);
}

@keyframes imageFloat {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

/* Product Container */
.product-container {
  background: var(--section-gradient);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  padding: 40px;
  border-radius: var(--border-radius);
  margin: 20px clamp(10px, 3vw, 20px);
  box-shadow: 0 10px 30px rgba(98, 102, 244, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Filter and Search */
.filter-search {
  display: flex;
  gap: 20px;
  align-items: center;
  justify-content: center;
  margin-bottom: 40px;
  flex-wrap: wrap;
}

.search-container, .filter-container {
  flex: 1;
  min-width: 250px;
  max-width: 300px;
}

input[type="text"], select {
  width: 100%;
  padding: 16px 20px;
  border: 2px solid rgba(99, 102, 241, 0.1);
  border-radius: 12px;
  font-size: 16px;
  background: rgba(255, 255, 255, 0.9);
  transition: var(--transition);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

input[type="text"]:focus, select:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
  transform: translateY(-2px);
}

/* Section Heading */
h2 {
  color: var(--gold);
  font-weight: bold;
  font-size: clamp(1.8rem, 5vw, 3.5rem);
  text-align: center;
  margin-bottom: 15px;
  font-family: Great Vibes;
  text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
  animation: titleGlow 3s ease-in-out infinite alternate;
}

@keyframes titleGlow {
  from { text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 215, 0, 0.3); }
  to { text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3), 0 0 30px rgba(255, 215, 0, 0.6); }
}

/* Product Cards Grid */
.product-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 30px;
  justify-content: center;
  padding: 0 10px;
}

/* Product Card - ENHANCED */
.product {
  background: white;
  border-radius: 16px;
  padding: 0;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  transition: var(--transition);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.product:hover {
  transform: translateY(-8px);
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
}

.product img {
  width: 100%;
  height: 250px;
  object-fit: cover;
  display: block;
  transition: var(--transition);
}

.product:hover img {
  transform: scale(1.05);
}

.product h3 {
  font-size: 18px;
  font-family: "Delius", cursive;
  color: var(--text-primary);
  font-weight: 600;
  text-align: center;
  margin: 16px 20px 8px;
}

.product .product-price {
  color: var(--accent-color);
  font-weight: 700;
  font-size: 20px;
  text-align: center;
  margin: 0 20px 8px;
}

.product p {
  color: var(--text-secondary);
  font-weight: 500;
  text-align: center;
  margin: 8px 20px;
  font-size: 14px;
}

/* Weight Selector */
.quantity-selector {
  margin: 15px 20px;
  width: calc(100% - 40px);
  padding: 12px 16px;
  border: 2px solid rgba(99, 102, 241, 0.1);
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.9);
  font-size: 14px;
  transition: var(--transition);
  cursor: pointer;
}

.quantity-selector:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

/* Add to Cart Button */
.add-to-cart {
  background: linear-gradient(135deg, var(--accent-color), #059669);
  color: white;
  border: none;
  padding: 14px 28px;
  cursor: pointer;
  margin: 15px 20px 20px;
  border-radius: 12px;
  transition: var(--transition);
  font-weight: 600;
  font-size: 16px;
  box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
  position: relative;
  overflow: hidden;
}

.add-to-cart::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition: var(--transition);
}

.add-to-cart:hover::before {
  width: 300px;
  height: 300px;
}

.add-to-cart:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
}

/* Footer */
.business-footer {
  background: linear-gradient(135deg, #0000ff 0%, #1e3a8a 50%, #1e40af 100%);
  color: floralwhite;
  padding: clamp(40px, 6vw, 60px) clamp(15px, 4vw, 20px) clamp(20px, 3vw, 30px);
  font-family: Delius;
  border-top: 4px solid var(--gold);
  box-shadow: 0 -8px 25px rgba(0, 0, 0, 0.2);
  margin-top: 30px;
}

.footer-content {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: clamp(25px, 5vw, 40px);
}

.footer-section {
  flex: 1 1 280px;
  min-width: 250px;
}

.footer-section h3 {
  font-family: "Great Vibes", cursive;
  font-size: clamp(1.6rem, 4vw, 2.2rem);
  color: var(--gold);
  margin-bottom: 20px;
  text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
}

.footer-section p {
  font-size: clamp(0.9rem, 2.5vw, 1rem);
  line-height: 1.6;
  color: floralwhite;
  margin-bottom: 15px;
  font-family: Delius;
}

.footer-section ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.footer-section ul li {
  padding: 10px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
  transition: var(--transition);
  font-family: Delius;
  font-size: clamp(0.9rem, 2.5vw, 1rem);
}

.footer-section ul li:hover {
  padding-left: 15px;
  color: var(--gold);
  text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
}

.footer-section a {
  color: floralwhite;
  text-decoration: none;
  transition: var(--transition);
  font-family: Delius;
}

.footer-section a:hover {
  color: var(--gold);
  text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
}

.contact-info-item {
  display: flex;
  align-items: center;
  margin-bottom: 12px;
  font-family: Delius;
  font-size: clamp(0.9rem, 2.5vw, 1rem);
}

.contact-info-item i {
  width: 25px;
  margin-right: 12px;
  color: var(--gold);
  font-size: 1.1rem;
}

.social-footer-links {
  display: flex;
  gap: 15px;
  margin-top: 20px;
  flex-wrap: wrap;
}

.social-footer-links a {
  display: inline-block;
  width: 45px;
  height: 45px;
  background: linear-gradient(45deg, #11124a, #1a1d5a);
  border-radius: 50%;
  text-align: center;
  line-height: 45px;
  transition: var(--transition);
  border: 2px solid rgba(255, 215, 0, 0.3);
  box-shadow: 0 4px 15px rgba(17, 18, 74, 0.3);
}

.social-footer-links a:hover {
  background: var(--hover-gradient);
  color: var(--primary-text);
  transform: translateY(-3px) scale(1.1);
  box-shadow: 0 8px 25px rgba(254, 163, 170, 0.4);
  border-color: var(--gold);
}

.footer-logo-img {
  max-width: 100px;
  height: auto;
  margin-bottom: 15px;
  border-radius: 15px;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
  transition: var(--transition);
}

.footer-logo-img:hover {
  transform: scale(1.05) rotate(2deg);
  box-shadow: 0 15px 40px rgba(255, 215, 0, 0.3);
}

.footer-bottom-section {
  margin-top: 40px;
  padding-top: 25px;
  border-top: 2px solid rgba(255, 215, 0, 0.3);
  text-align: center;
}

.footer-bottom-section p {
  font-size: clamp(0.9rem, 2.5vw, 1rem);
  color: var(--gold);
  font-family: Delius;
  font-weight: bold;
}

.loading {
  text-align: center;
  padding: 40px;
  color: #660000;
  font-size: 1.2em;
}

.error-message {
  text-align: center;
  padding: 40px;
  color: #660000;
  background-color: #ffebee;
  margin: 20px;
  border-radius: 5px;
}

/* Media Queries */
@media screen and (max-width: 768px) {
  .notification {
    top: 70px;
    right: -400px;
    max-width: calc(100% - 40px);
    padding: 15px 20px;
    font-size: 14px;
  }

  .notification.show {
    right: 20px;
  }

  .topnav {
    padding: 0 5px;
    position: relative;
    min-height: 50px;
  }

  .topnav a:not(.active):not(.cart-icon):not(.icon) {
    display: none;
    clear: both;
    width: 100%;
  }

  .topnav a.active {
    float: left;
    margin: 8px 3px;
    padding: 12px 14px;
  }

  .topnav .cart-icon {
    position: absolute !important;
    top: 0;
    right: 55px;
    float: none;
    margin: 8px 3px;
    padding: 12px 14px;
    font-size: 0.9rem;
  }

  .topnav a.icon {
    position: absolute !important;
    top: 0;
    right: 5px;
    float: none;
    display: block !important;
    margin: 8px 3px;
    padding: 12px 14px;
    font-size: 1.2rem;
    color: var(--primary-text);
    background: rgba(255, 255, 255, 0.2);
  }

  .topnav a {
    margin: 5px 3px;
    padding: 12px 14px;
    font-size: 0.9rem;
  }

  .topnav.responsive {
    position: relative;
  }

  .topnav.responsive a.active {
    float: left;
    margin: 8px 3px;
    padding: 12px 14px;
  }

  .topnav.responsive .cart-icon {
    position: absolute !important;
    top: 0;
    right: 55px;
    float: none;
    margin: 8px 3px;
  }

  .topnav.responsive a.icon {
    position: absolute !important;
    top: 0;
    right: 5px;
    float: none;
    color: var(--gold);
    background: linear-gradient(45deg, #3e476f, #5a6491);
    margin: 8px 3px;
  }

  .topnav.responsive a:not(.active):not(.icon):not(.cart-icon) {
    display: block;
    float: none;
    text-align: left;
    width: 100%;
    clear: both;
    margin: 5px 10px;
  }

  .topnav.responsive a:not(.active):not(.icon):not(.cart-icon):first-of-type {
    padding-top: 0;
    margin-top: 50px;
  }

  .product-cards {
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
  }

  .filter-search {
    flex-direction: column;
    gap: 15px;
  }

  .search-container, .filter-container {
    max-width: 100%;
    min-width: 100%;
  }

  .footer-content {
    flex-direction: column;
    gap: 25px;
  }

  .footer-section {
    text-align: center;
    min-width: auto;
  }

  .social-footer-links {
    justify-content: center;
  }
}

@media screen and (max-width: 992px) {
  .product-cards {
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 25px;
  }

  .product-container {
    padding: 30px 20px;
    margin: 30px 15px;
  }
}

@media screen and (max-width: 576px) {
  .product-cards {
    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
    gap: 15px;
  }

  .product {
    padding: 0;
  }

  .product-container {
    padding: 20px 15px;
    margin: 20px 10px;
  }
}
    </style>
  </head>

  <body>
    <!-- Navigation Bar -->
    <div class="topnav" id="myTopnav">
      <a href="index.html">Home</a>
      <a href="Products_cakes.html" class="active">Products</a>
      <a href="index.html">About Me</a>
      <a href="index.html">Reviews</a>
      <a href="index.html">Contact Us</a>
      <a href="special_order_cake.html">Special Order</a>

      <a href="Cart_cake.html" class="cart-icon">
        <i class="fa fa-shopping-cart"></i>
        <span class="cart-count" id="cart-count">(0)</span>
      </a>

      <a href="javascript:void(0);" class="icon" onclick="myFunction()">
        <i class="fa fa-bars"></i>
      </a>
    </div>

    <!-- Add this right after <body> tag -->
    <div id="notification" class="notification">
      <i class="fa fa-check-circle"></i>
      <span id="notification-text">Product added to cart!</span>
    </div>

    <img src="border top.png" class="border-image" />
    <img src="border bottom.png" class="border-image" />

    <div class="product-container">
      <div class="filter-search">
        <div class="search-container">
          <input type="text" id="search" placeholder="Search products..." />
        </div>
        <div class="filter-container">
          <select id="categoryFilter">
            <option value="all">All Products</option>
            <option value="Chocolate">Chocolate</option>
            <option value="Vanilla">Vanilla</option>
            <option value="Custom Cake">Custom Cake</option>
            <option value="Rich Chocolate Truffle">
              Rich Chocolate Truffle
            </option>
            <option value="Occasion Cake">Occasion Cake</option>
            <option value="Flavoured Cakes">Flavoured Cakes</option>
            <option value="Traditional Fusion Cakes">
              Traditional Fusion Cakes
            </option>
            <option value="Red Velvet Cake">Red Velvet Cake</option>
            <option value="Dry Cakes">Dry Cakes</option>
            <option value="Theme Cakes (Fondant or Chocolate)">
              Theme Cakes (Fondant or Chocolate)
            </option>
            <option value="Fondant & Semi Fondant Cake">
              Fondant & Semi Fondant Cake
            </option>
            <option value="Multi-Tier Cake">Multi-Tier Cake</option>
            <option value="Low Sugar Cake">Low Sugar Cake</option>
            <option value="Diabetic Cake">Diabetic Cake</option>
            <option value="Cheese Cake">Cheese Cake</option>
          </select>
        </div>
      </div>

      <h2>Our Products</h2>
      <div class="product-cards" id="productContainer">
        <div class="loading">Loading products...</div>
      </div>
    </div>

    <img src="border top.png" class="border-image" />
    <img src="border bottom.png" class="border-image" />

    <!-- Professional Business Footer -->
    <footer class="business-footer">
      <div class="footer-content">
        <div class="footer-section">
          <img
            src="Cake_Logo.jpg"
            alt="PassionBakeryNChocos Logo"
            class="footer-logo-img"
          />
          <h3>PassionBakeryNChocos</h3>
          <p>
            Crafting sweet memories with every bite. We specialize in custom
            cakes, homemade chocolates, and unique gift items made with pure
            vegetarian ingredients in the most hygienic environment.
          </p>
          <div class="social-footer-links">
            <a
              href="https://www.facebook.com/share/17UMkLQ8Kb/"
              target="_blank"
              title="Facebook"
              ><i class="fa fa-facebook"></i
            ></a>
            <a
              href="https://www.instagram.com/passionbakerynchoco15?igsh=NTA4NmNsZDNjd2Rp"
              target="_blank"
              title="Instagram"
              ><i class="fa fa-instagram"></i
            ></a>
            <a
              href="https://wa.me/919869153017"
              target="_blank"
              title="WhatsApp"
              ><i class="fa fa-whatsapp"></i
            ></a>
            <a href="https://pin.it/5SXLo07ns" target="_blank" title="Pinterest"
              ><i class="fa fa-pinterest"></i
            ></a>
          </div>
        </div>

        <div class="footer-section">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="Products_cakes.html">Cakes Collection</a></li>
            <li><a href="Chocolates.html">Homemade Chocolates</a></li>
            <li><a href="Gift.html">Gift Items</a></li>
            <li><a href="special_order_cake.html">Special Orders</a></li>
            <li><a href="Cart_cake.html">Shopping Cart</a></li>
          </ul>
        </div>

        <div class="footer-section">
          <h3>Our Specialties</h3>
          <ul>
            <li>Custom Birthday Cakes</li>
            <li>Wedding & Anniversary Cakes</li>
            <li>Festival Special Treats</li>
            <li>Corporate Gifts & Bulk Orders</li>
            <li>Homemade Chocolates</li>
            <li>Personalized Gift Hampers</li>
          </ul>
        </div>

        <div class="footer-section">
          <h3>Get In Touch</h3>
          <div class="contact-info-item">
            <i class="fa fa-envelope"></i>
            <span>manjupathak135@gmail.com</span>
          </div>
          <div class="contact-info-item">
            <i class="fa fa-phone"></i>
            <span>+91 9869153017</span>
            <!-- <span>+91 6376027550</span> -->
          </div>
          <div class="contact-info-item">
            <i class="fa fa-clock-o"></i>
            <span>Available: 9AM - 6PM Daily</span>
          </div>
          <div class="contact-info-item">
            <i class="fa fa-map-marker"></i>
            <span>Mumbai, Maharashtra, India</span>
          </div>
        </div>
      </div>

      <div class="footer-bottom-section">
        <p>
          &copy; 2024 PassionBakeryNChocos. All rights reserved. Made with love
          for sweet celebrations! ❤️
        </p>
      </div>
    </footer>

    <script>
      // ===== CONFIGURATION =====
      // Replace this with your Google Sheets published CSV URL for Cakes
      const SHEET_URL =
        "https://docs.google.com/spreadsheets/d/e/2PACX-1vRQdjTKmS2L-WpigSlgEtJZBNsD8NPOZKKQ_FMoFbSTeadG6hUIp8cl4-kRMFeFfglESm8oHsLQ1HWm/pub?gid=0&single=true&output=csv";
      const PRODUCTS_PER_PAGE = 20;

      // ===== GLOBAL VARIABLES =====
      let allProducts = [];
      let filteredProducts = [];
      let currentPage = 1;
      let cartCount = 0;
      let cart = JSON.parse(localStorage.getItem("cart")) || [];

      // Update cart count on page load
      updateCartCount();

      // ===== FETCH PRODUCTS FROM GOOGLE SHEETS =====
      async function fetchProducts() {
        try {
          const response = await fetch(SHEET_URL);
          const csvText = await response.text();

          // Parse CSV
          const lines = csvText.split("\n");
          const products = [];

          // Skip header row (index 0), start from row 1
          for (let i = 1; i < lines.length; i++) {
            const line = lines[i].trim();
            if (!line) continue; // Skip empty lines

            // Split by comma, but handle commas in quotes
            const values = line
              .split(",")
              .map((val) => val.trim().replace(/^"|"$/g, ""));

            if (values.length >= 5) {
              products.push({
                name: values[0],
                baseQuantity: values[1], // e.g., "500g" or "1kg"
                basePrice: parseFloat(values[2]) || 0,
                category: values[3] || "Uncategorized",
                availableQuantities: values[4]
                  ? values[4].split(",").map((q) => q.trim())
                  : [],
              });
            }
          }

          allProducts = products;
          filteredProducts = products;
          currentPage = 1;
          displayProducts();
          updatePagination();
        } catch (error) {
          console.error("Error fetching products:", error);
          document.getElementById("productContainer").innerHTML = `
            <div class="error-message">
                <p><strong>Unable to load products</strong></p>
                <p>Please check your Google Sheet URL configuration.</p>
                <p>Error: ${error.message}</p>
            </div>
        `;
        }
      }

      // ===== CONVERT WEIGHT TO KG =====
      function weightToKg(weight) {
        weight = weight.toLowerCase().trim();
        if (weight.includes("kg")) {
          return parseFloat(weight.replace("kg", ""));
        } else if (weight.includes("g")) {
          return parseFloat(weight.replace("g", "")) / 1000;
        }
        return parseFloat(weight);
      }

      // ===== CALCULATE PRICE BASED ON WEIGHT =====
      function calculatePrice(baseQuantity, basePrice, selectedQuantity) {
        const baseWeightKg = weightToKg(baseQuantity);
        const selectedWeightKg = weightToKg(selectedQuantity);
        const pricePerKg = basePrice / baseWeightKg;
        return (pricePerKg * selectedWeightKg).toFixed(2);
      }

      // ===== DISPLAY PRODUCTS =====
      function displayProducts() {
        const container = document.getElementById("productContainer");
        container.innerHTML = ""; // Clear loading message

        if (filteredProducts.length === 0) {
          container.innerHTML =
            '<p style="text-align: center; color: #660000;">No products found.</p>';
          return;
        }

        // Calculate pagination
        const startIndex = (currentPage - 1) * PRODUCTS_PER_PAGE;
        const endIndex = startIndex + PRODUCTS_PER_PAGE;
        const productsToDisplay = filteredProducts.slice(startIndex, endIndex);

        productsToDisplay.forEach((product, index) => {
          const actualIndex = startIndex + index;
          const productDiv = document.createElement("div");
          productDiv.className = "product";
          productDiv.setAttribute("data-product-index", actualIndex);

          // Create image element with fallback logic
          const img = document.createElement("img");
          img.alt = product.name;

          // Try loading image with different extensions
          tryLoadImage(img, product.name);

          // Create quantity dropdown
          let quantityOptions = "";
          product.availableQuantities.forEach((qty) => {
            const price = calculatePrice(
              product.baseQuantity,
              product.basePrice,
              qty
            );
            quantityOptions += `<option value="${qty}" data-price="${price}">${qty} - $${price}</option>`;
          });

          // Default price (first quantity option)
          const defaultPrice =
            product.availableQuantities.length > 0
              ? calculatePrice(
                  product.baseQuantity,
                  product.basePrice,
                  product.availableQuantities[0]
                )
              : product.basePrice.toFixed(2);

          productDiv.innerHTML = `
            <h3>${product.name}</h3>
            <p class="product-price">$${defaultPrice}</p>
            <select class="quantity-selector" data-product-index="${actualIndex}">
                ${quantityOptions}
            </select>
            <button class="add-to-cart" data-product-index="${actualIndex}">Add to Cart</button>
        `;

          // Insert image at the beginning
          productDiv.insertBefore(img, productDiv.firstChild);

          container.appendChild(productDiv);
        });

        // Add event listeners
        attachQuantityListeners();
        attachCartListeners();
      }

      // ===== PAGINATION =====
      function updatePagination() {
        const totalPages = Math.ceil(
          filteredProducts.length / PRODUCTS_PER_PAGE
        );
        const paginationContainer = document.querySelector(".pagination");

        if (!paginationContainer) return;

        paginationContainer.innerHTML = "";

        // Don't show pagination if only 1 page or no products
        if (totalPages <= 1) {
          return;
        }

        // Previous button
        if (currentPage > 1) {
          const prevLink = document.createElement("a");
          prevLink.href = "#";
          prevLink.innerHTML = "&laquo;";
          prevLink.addEventListener("click", (e) => {
            e.preventDefault();
            goToPage(currentPage - 1);
          });
          paginationContainer.appendChild(prevLink);
        }

        // Page numbers
        for (let i = 1; i <= totalPages; i++) {
          const pageLink = document.createElement("a");
          pageLink.href = "#";
          pageLink.textContent = i;

          if (i === currentPage) {
            pageLink.className = "active";
          }

          pageLink.addEventListener("click", (e) => {
            e.preventDefault();
            goToPage(i);
          });

          paginationContainer.appendChild(pageLink);
        }

        // Next button
        if (currentPage < totalPages) {
          const nextLink = document.createElement("a");
          nextLink.href = "#";
          nextLink.innerHTML = "&raquo;";
          nextLink.addEventListener("click", (e) => {
            e.preventDefault();
            goToPage(currentPage + 1);
          });
          paginationContainer.appendChild(nextLink);
        }
      }

      function goToPage(pageNumber) {
        currentPage = pageNumber;
        displayProducts();
        updatePagination();

        // Scroll to top of products section
        document
          .getElementById("products")
          .scrollIntoView({ behavior: "smooth" });
      }

      // ===== IMAGE LOADING WITH FALLBACK =====
      function tryLoadImage(imgElement, productName) {
        const extensions = ["jpg", "jpeg", "png"];
        let currentIndex = 0;

        function loadNext() {
          if (currentIndex >= extensions.length) {
            // No image found, use placeholder
            imgElement.src =
              'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="250" height="200"%3E%3Crect fill="%23f0f0f0" width="250" height="200"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23999" font-family="Arial" font-size="16"%3ENo Image%3C/text%3E%3C/svg%3E';
            return;
          }

          const imagePath = `${productName}.${extensions[currentIndex]}`;

          imgElement.onload = function () {
            // Image loaded successfully
          };

          imgElement.onerror = function () {
            // Try next extension
            currentIndex++;
            loadNext();
          };

          imgElement.src = imagePath;
        }

        loadNext();
      }

      // ===== QUANTITY SELECTOR LISTENERS =====
      function attachQuantityListeners() {
        document.querySelectorAll(".quantity-selector").forEach((select) => {
          select.addEventListener("change", function () {
            const productIndex = this.getAttribute("data-product-index");
            const selectedOption = this.options[this.selectedIndex];
            const newPrice = selectedOption.getAttribute("data-price");

            // Update displayed price
            const productDiv = this.closest(".product");
            const priceElement = productDiv.querySelector(".product-price");
            priceElement.textContent = `$${newPrice}`;
          });
        });
      }

      // ===== CATEGORY FILTER =====
      document
        .getElementById("categoryFilter")
        .addEventListener("change", function () {
          const selectedCategory = this.value;

          if (selectedCategory === "all") {
            filteredProducts = allProducts;
          } else {
            filteredProducts = allProducts.filter(
              (product) => product.category === selectedCategory
            );
          }

          currentPage = 1; // Reset to first page when filtering
          displayProducts();
          updatePagination();
        });

      // ===== CART FUNCTIONALITY =====
      function attachCartListeners() {
        document.querySelectorAll(".add-to-cart").forEach((button) => {
          button.addEventListener("click", (e) => {
            const productIndex = e.target.getAttribute("data-product-index");
            const product = filteredProducts[productIndex];

            // Get selected quantity and price
            const productDiv = e.target.closest(".product");
            const quantitySelector =
              productDiv.querySelector(".quantity-selector");
            const selectedQuantity = quantitySelector.value;
            const selectedPrice = parseFloat(
              quantitySelector.options[
                quantitySelector.selectedIndex
              ].getAttribute("data-price")
            );

            addToCart(product.name, selectedPrice, selectedQuantity);
          });
        });
      }

      function addToCart(name, price, quantity) {
        // Create unique identifier with name and quantity
        const itemIdentifier = `${name} (${quantity})`;

        // Check if exact product with same quantity is already in cart
        let existingProduct = cart.find(
          (item) => item.identifier === itemIdentifier
        );

        if (existingProduct) {
          existingProduct.qty += 1; // Increment number of this item
          existingProduct.totalPrice = (existingProduct.qty * price).toFixed(2);
        } else {
          cart.push({
            identifier: itemIdentifier,
            name: name,
            price: parseFloat(price),
            quantity: quantity, // This is the weight (500g, 1kg, etc.)
            qty: 1, // This is how many of this item in cart
            totalPrice: parseFloat(price).toFixed(2),
          });
        }

        updateCartCount();

        // Store cart in localStorage
        localStorage.setItem("cart", JSON.stringify(cart));

        // Show feedback
        showAddedToCartFeedback();
      }

      function updateCartCount() {
        cartCount = cart.reduce((total, item) => total + item.qty, 0);
        document.querySelector(".cart-count").textContent = cartCount;
      }

      function showAddedToCartFeedback() {
        const cartIcon = document.querySelector(".cart-icon");
        cartIcon.style.transform = "scale(1.2)";
        setTimeout(() => {
          cartIcon.style.transform = "scale(1)";
        }, 200);
      }

      // ===== MOBILE MENU TOGGLE =====
      function myFunction() {
        var x = document.getElementById("myTopnav");
        if (x.className === "topnav") {
          x.className += " responsive";
        } else {
          x.className = "topnav";
        }
      }

      // ===== INITIALIZE =====
      // Load products when page loads
      fetchProducts();
    </script>
  </body>
</html>
